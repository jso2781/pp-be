<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.kids.domain.pp.faq.mapper.FaqMapper">

    <select id="getFaq" parameterType="FaqPVO" resultType="FaqRVO" >
        /* 대국민포털_FAQ기본 조회 (FaqMapper.getFaq) */
        SELECT
             faq_sn
            ,task_se_cd
            ,faq_clsf
            ,faq_ttl
            ,faq_seq
            ,use_yn
            ,lang_se_cd
            ,faq_ans
            ,atch_file_id
            ,wrtr_dept_nm
            ,mdfr_dept_nm
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        FROM "KIDS_OWN"."TB_PP_M_FAQ"
        WHERE 1=1
        AND faq_sn = #{faqSn}
    </select>

    <insert id="insertFaq" parameterType="FaqPVO">
        /* 대국민포털_FAQ기본 입력 (FaqMapper.insertFaq) */
        INSERT INTO "KIDS_OWN"."TB_PP_M_FAQ"
        (
             faq_sn
            ,task_se_cd
            ,faq_clsf
            ,faq_ttl
            ,faq_seq
            ,use_yn
            ,lang_se_cd
            ,faq_ans
            ,atch_file_id
            ,wrtr_dept_nm
            ,mdfr_dept_nm
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        )
        VALUES
        (
             #{faqSn}
            ,#{taskSeCd}
            ,#{faqClsf}
            ,#{faqTtl}
            ,#{faqSeq}
            ,#{useYn}
            ,#{langSeCd}
            ,#{faqAns}
            ,#{atchFileId}
            ,#{wrtrDeptNm}
            ,#{mdfrDeptNm}
            ,#{rgtrId}
            ,now()
            ,#{regPrgrmId}
            ,#{mdfrId}
            ,now()
            ,#{mdfcnPrgrmId}
        )
    </insert>

    <update id="updateFaq" parameterType="FaqPVO">
        /* 대국민포털_FAQ기본 수정 (FaqMapper.updateFaq) */
        UPDATE "KIDS_OWN"."TB_PP_M_FAQ"
        SET
             task_se_cd = coalesce(#{taskSeCd}, task_se_cd)
            ,faq_clsf = coalesce(#{faqClsf}, faq_clsf)
            ,faq_ttl = coalesce(#{faqTtl}, faq_ttl)
            ,faq_seq = coalesce(#{faqSeq}, faq_seq)
            ,use_yn = coalesce(#{useYn}, use_yn)
            ,lang_se_cd = coalesce(#{langSeCd}, lang_se_cd)
            ,faq_ans = coalesce(#{faqAns}, faq_ans)
            ,atch_file_id = coalesce(#{atchFileId}, atch_file_id)
            ,wrtr_dept_nm = coalesce(#{wrtrDeptNm}, wrtr_dept_nm)
            ,mdfr_dept_nm = coalesce(#{mdfrDeptNm}, mdfr_dept_nm)
            ,mdfr_id = coalesce(#{mdfrId}, mdfr_id)
            ,mdfcn_dt = now()
            ,mdfcn_prgrm_id = coalesce(#{mdfcnPrgrmId}, mdfcn_prgrm_id)
        WHERE 1=1
        AND faq_sn = #{faqSn}
    </update>

    <insert id="saveFaq" parameterType="FaqPVO">
        /* 대국민포털_FAQ기본 저장 (FaqMapper.insertFaq) */
        INSERT INTO "KIDS_OWN"."TB_PP_M_FAQ"
        (
             faq_sn
            ,task_se_cd
            ,faq_clsf
            ,faq_ttl
            ,faq_seq
            ,use_yn
            ,lang_se_cd
            ,faq_ans
            ,atch_file_id
            ,wrtr_dept_nm
            ,mdfr_dept_nm
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        )
        VALUES
        (
             #{faqSn}
            ,#{taskSeCd}
            ,#{faqClsf}
            ,#{faqTtl}
            ,#{faqSeq}
            ,#{useYn}
            ,#{langSeCd}
            ,#{faqAns}
            ,#{atchFileId}
            ,#{wrtrDeptNm}
            ,#{mdfrDeptNm}
            ,#{rgtrId}
            ,now()
            ,#{regPrgrmId}
            ,#{mdfrId}
            ,now()
            ,#{mdfcnPrgrmId}
        )
        ON CONFLICT(faq_sn)
        DO UPDATE SET
             task_se_cd = coalesce(excluded.task_se_cd, "KIDS_OWN"."TB_PP_M_FAQ".task_se_cd)
            ,faq_clsf = coalesce(excluded.faq_clsf, "KIDS_OWN"."TB_PP_M_FAQ".faq_clsf)
            ,faq_ttl = coalesce(excluded.faq_ttl, "KIDS_OWN"."TB_PP_M_FAQ".faq_ttl)
            ,faq_seq = coalesce(excluded.faq_seq, "KIDS_OWN"."TB_PP_M_FAQ".faq_seq)
            ,use_yn = coalesce(excluded.use_yn, "KIDS_OWN"."TB_PP_M_FAQ".use_yn)
            ,lang_se_cd = coalesce(excluded.lang_se_cd, "KIDS_OWN"."TB_PP_M_FAQ".lang_se_cd)
            ,faq_ans = coalesce(excluded.faq_ans, "KIDS_OWN"."TB_PP_M_FAQ".faq_ans)
            ,atch_file_id = coalesce(excluded.atch_file_id, "KIDS_OWN"."TB_PP_M_FAQ".atch_file_id)
            ,wrtr_dept_nm = coalesce(excluded.wrtr_dept_nm, "KIDS_OWN"."TB_PP_M_FAQ".wrtr_dept_nm)
            ,mdfr_dept_nm = coalesce(excluded.mdfr_dept_nm, "KIDS_OWN"."TB_PP_M_FAQ".mdfr_dept_nm)
            ,mdfr_id = coalesce(excluded.mdfr_id, "KIDS_OWN"."TB_PP_M_FAQ".mdfr_id)
            ,mdfcn_dt = now()
            ,mdfcn_prgrm_id = coalesce(excluded.mdfcn_prgrm_id, "KIDS_OWN"."TB_PP_M_FAQ".mdfcn_prgrm_id)
    </insert>

    <delete id="deleteFaq" parameterType="FaqDVO">
        /* 대국민포털_FAQ기본 삭제 (FaqMapper.deleteFaq) */
        DELETE FROM "KIDS_OWN"."TB_PP_M_FAQ"
        WHERE 1=1
        AND faq_sn = #{faqSn}
    </delete>

</mapper>