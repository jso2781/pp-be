<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.kids.domain.dur.mapper.DurConcBannMapper">

    <select id="getDurConcBann" parameterType="DurConcBannPVO" resultType="DurConcBannRVO" >
        /* 대국민포털_DUR병용금기기본 조회 (ConcBannMapper.getConcBann) */
        SELECT
             conc_bann_sn
            ,prdct_cd_1
            ,prdct_cd_2
            ,igrd_nm_1
            ,igrd_cd_1
            ,prdct_nm_1
            ,bzenty_nm_1
            ,se_1
            ,mfds_prdct_nm_1
            ,mfds_igrd_cd_1
            ,mfds_igrd_nm_1
            ,igrd_nm_2
            ,igrd_cd_2
            ,prdct_nm_2
            ,bzenty_nm_2
            ,se_2
            ,mfds_prdct_nm_2
            ,mfds_igrd_cd_2
            ,mfds_igrd_nm_2
            ,ancmnt_no
            ,ancmnt_aplcn_day
            ,cutn_mttr
            ,rmrk_cn
            ,type_cd
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        FROM kids_own.tb_pp_m_dur_conc_bann
        WHERE 1=1
        AND conc_bann_sn = #{concBannSn}
    </select>

    <insert id="insertDurConcBann" parameterType="DurConcBannPVO">
        /* 대국민포털_DUR병용금기기본 입력 (ConcBannMapper.insertConcBann) */
        INSERT INTO kids_own.tb_pp_m_dur_conc_bann
        (
             conc_bann_sn
            ,prdct_cd_1
            ,prdct_cd_2
            ,igrd_nm_1
            ,igrd_cd_1
            ,prdct_nm_1
            ,bzenty_nm_1
            ,se_1
            ,mfds_prdct_nm_1
            ,mfds_igrd_cd_1
            ,mfds_igrd_nm_1
            ,igrd_nm_2
            ,igrd_cd_2
            ,prdct_nm_2
            ,bzenty_nm_2
            ,se_2
            ,mfds_prdct_nm_2
            ,mfds_igrd_cd_2
            ,mfds_igrd_nm_2
            ,ancmnt_no
            ,ancmnt_aplcn_day
            ,cutn_mttr
            ,rmrk_cn
            ,type_cd
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        )
        VALUES
        (
             #{concBannSn}
            ,#{prdctCd1}
            ,#{prdctCd2}
            ,#{igrdNm1}
            ,#{igrdCd1}
            ,#{prdctNm1}
            ,#{bzentyNm1}
            ,#{se1}
            ,#{mfdsPrdctNm1}
            ,#{mfdsIgrdCd1}
            ,#{mfdsIgrdNm1}
            ,#{igrdNm2}
            ,#{igrdCd2}
            ,#{prdctNm2}
            ,#{bzentyNm2}
            ,#{se2}
            ,#{mfdsPrdctNm2}
            ,#{mfdsIgrdCd2}
            ,#{mfdsIgrdNm2}
            ,#{ancmntNo}
            ,#{ancmntAplcnDay}
            ,#{cutnMttr}
            ,#{rmrk_cn}
            ,#{typeCd}
            ,#{rgtrId}
            ,now()

            ,#{mdfrId}
            ,now()

        )
    </insert>

    <update id="updateDurConcBann" parameterType="DurConcBannPVO">
        /* 대국민포털_DUR병용금기기본 수정 (ConcBannMapper.updateConcBann) */
        UPDATE kids_own.tb_pp_m_dur_conc_bann
        SET
             prdct_cd_1 = coalesce(#{prdctCd1}, prdct_cd_1)
            ,prdct_cd_2 = coalesce(#{prdctCd2}, prdct_cd_2)
            ,igrd_nm_1 = coalesce(#{igrdNm1}, igrd_nm_1)
            ,igrd_cd_1 = coalesce(#{igrdCd1}, igrd_cd_1)
            ,prdct_nm_1 = coalesce(#{prdctNm1}, prdct_nm_1)
            ,bzenty_nm_1 = coalesce(#{bzentyNm1}, bzenty_nm_1)
            ,se_1 = coalesce(#{se1}, se_1)
            ,mfds_prdct_nm_1 = coalesce(#{mfdsPrdctNm1}, mfds_prdct_nm_1)
            ,mfds_igrd_cd_1 = coalesce(#{mfdsIgrdCd1}, mfds_igrd_cd_1)
            ,mfds_igrd_nm_1 = coalesce(#{mfdsIgrdNm1}, mfds_igrd_nm_1)
            ,igrd_nm_2 = coalesce(#{igrdNm2}, igrd_nm_2)
            ,igrd_cd_2 = coalesce(#{igrdCd2}, igrd_cd_2)
            ,prdct_nm_2 = coalesce(#{prdctNm2}, prdct_nm_2)
            ,bzenty_nm_2 = coalesce(#{bzentyNm2}, bzenty_nm_2)
            ,se_2 = coalesce(#{se2}, se_2)
            ,mfds_prdct_nm_2 = coalesce(#{mfdsPrdctNm2}, mfds_prdct_nm_2)
            ,mfds_igrd_cd_2 = coalesce(#{mfdsIgrdCd2}, mfds_igrd_cd_2)
            ,mfds_igrd_nm_2 = coalesce(#{mfdsIgrdNm2}, mfds_igrd_nm_2)
            ,ancmnt_no = coalesce(#{ancmntNo}, ancmnt_no)
            ,ancmnt_aplcn_day = coalesce(#{ancmntAplcnDay}, ancmnt_aplcn_day)
            ,cutn_mttr = coalesce(#{cutnMttr}, cutn_mttr)
            ,rmrk_cn = coalesce(#{rmrk_cn}, rmrk_cn)
            ,type_cd = coalesce(#{typeCd}, type_cd)
            ,mdfr_id = coalesce(#{mdfrId}, mdfr_id)
            ,mdfcn_dt = now()

        WHERE 1=1
        AND conc_bann_sn = #{concBannSn}
    </update>

    <insert id="saveDurConcBann" parameterType="DurConcBannPVO">
        /* 대국민포털_DUR병용금기기본 저장 (ConcBannMapper.insertConcBann) */
        INSERT INTO kids_own.tb_pp_m_dur_conc_bann
        (
             conc_bann_sn
            ,prdct_cd_1
            ,prdct_cd_2
            ,igrd_nm_1
            ,igrd_cd_1
            ,prdct_nm_1
            ,bzenty_nm_1
            ,se_1
            ,mfds_prdct_nm_1
            ,mfds_igrd_cd_1
            ,mfds_igrd_nm_1
            ,igrd_nm_2
            ,igrd_cd_2
            ,prdct_nm_2
            ,bzenty_nm_2
            ,se_2
            ,mfds_prdct_nm_2
            ,mfds_igrd_cd_2
            ,mfds_igrd_nm_2
            ,ancmnt_no
            ,ancmnt_aplcn_day
            ,cutn_mttr
            ,rmrk_cn
            ,type_cd
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        )
        VALUES
        (
             #{concBannSn}
            ,#{prdctCd1}
            ,#{prdctCd2}
            ,#{igrdNm1}
            ,#{igrdCd1}
            ,#{prdctNm1}
            ,#{bzentyNm1}
            ,#{se1}
            ,#{mfdsPrdctNm1}
            ,#{mfdsIgrdCd1}
            ,#{mfdsIgrdNm1}
            ,#{igrdNm2}
            ,#{igrdCd2}
            ,#{prdctNm2}
            ,#{bzentyNm2}
            ,#{se2}
            ,#{mfdsPrdctNm2}
            ,#{mfdsIgrdCd2}
            ,#{mfdsIgrdNm2}
            ,#{ancmntNo}
            ,#{ancmntAplcnDay}
            ,#{cutnMttr}
            ,#{rmrk_cn}
            ,#{typeCd}
            ,#{rgtrId}
            ,now()

            ,#{mdfrId}
            ,now()

        )
        ON CONFLICT(conc_bann_sn)
        DO UPDATE SET
             prdct_cd_1 = coalesce(excluded.prdct_cd_1, kids_own.tb_pp_m_dur_conc_bann.prdct_cd_1)
            ,prdct_cd_2 = coalesce(excluded.prdct_cd_2, kids_own.tb_pp_m_dur_conc_bann.prdct_cd_2)
            ,igrd_nm_1 = coalesce(excluded.igrd_nm_1, kids_own.tb_pp_m_dur_conc_bann.igrd_nm_1)
            ,igrd_cd_1 = coalesce(excluded.igrd_cd_1, kids_own.tb_pp_m_dur_conc_bann.igrd_cd_1)
            ,prdct_nm_1 = coalesce(excluded.prdct_nm_1, kids_own.tb_pp_m_dur_conc_bann.prdct_nm_1)
            ,bzenty_nm_1 = coalesce(excluded.bzenty_nm_1, kids_own.tb_pp_m_dur_conc_bann.bzenty_nm_1)
            ,se_1 = coalesce(excluded.se_1, kids_own.tb_pp_m_dur_conc_bann.se_1)
            ,mfds_prdct_nm_1 = coalesce(excluded.mfds_prdct_nm_1, kids_own.tb_pp_m_dur_conc_bann.mfds_prdct_nm_1)
            ,mfds_igrd_cd_1 = coalesce(excluded.mfds_igrd_cd_1, kids_own.tb_pp_m_dur_conc_bann.mfds_igrd_cd_1)
            ,mfds_igrd_nm_1 = coalesce(excluded.mfds_igrd_nm_1, kids_own.tb_pp_m_dur_conc_bann.mfds_igrd_nm_1)
            ,igrd_nm_2 = coalesce(excluded.igrd_nm_2, kids_own.tb_pp_m_dur_conc_bann.igrd_nm_2)
            ,igrd_cd_2 = coalesce(excluded.igrd_cd_2, kids_own.tb_pp_m_dur_conc_bann.igrd_cd_2)
            ,prdct_nm_2 = coalesce(excluded.prdct_nm_2, kids_own.tb_pp_m_dur_conc_bann.prdct_nm_2)
            ,bzenty_nm_2 = coalesce(excluded.bzenty_nm_2, kids_own.tb_pp_m_dur_conc_bann.bzenty_nm_2)
            ,se_2 = coalesce(excluded.se_2, kids_own.tb_pp_m_dur_conc_bann.se_2)
            ,mfds_prdct_nm_2 = coalesce(excluded.mfds_prdct_nm_2, kids_own.tb_pp_m_dur_conc_bann.mfds_prdct_nm_2)
            ,mfds_igrd_cd_2 = coalesce(excluded.mfds_igrd_cd_2, kids_own.tb_pp_m_dur_conc_bann.mfds_igrd_cd_2)
            ,mfds_igrd_nm_2 = coalesce(excluded.mfds_igrd_nm_2, kids_own.tb_pp_m_dur_conc_bann.mfds_igrd_nm_2)
            ,ancmnt_no = coalesce(excluded.ancmnt_no, kids_own.tb_pp_m_dur_conc_bann.ancmnt_no)
            ,ancmnt_aplcn_day = coalesce(excluded.ancmnt_aplcn_day, kids_own.tb_pp_m_dur_conc_bann.ancmnt_aplcn_day)
            ,cutn_mttr = coalesce(excluded.cutn_mttr, kids_own.tb_pp_m_dur_conc_bann.cutn_mttr)
            ,rmrk_cn = coalesce(excluded.rmrk_cn, kids_own.tb_pp_m_dur_conc_bann.rmrk_cn)
            ,type_cd = coalesce(excluded.type_cd, kids_own.tb_pp_m_dur_conc_bann.type_cd)
            ,mdfr_id = coalesce(excluded.mdfr_id, kids_own.tb_pp_m_dur_conc_bann.mdfr_id)
            ,mdfcn_dt = now()

    </insert>

    <delete id="deleteDurConcBann" parameterType="DurConcBannDVO">
        /* 대국민포털_DUR병용금기기본 삭제 (ConcBannMapper.deleteConcBann) */
        DELETE FROM kids_own.tb_pp_m_dur_conc_bann
        WHERE 1=1
        AND conc_bann_sn = #{concBannSn}
    </delete>

</mapper>