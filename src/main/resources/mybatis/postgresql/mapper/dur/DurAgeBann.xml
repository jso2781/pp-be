<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.kids.domain.pp.dur.mapper.DurAgeBannMapper">

    <select id="getDurAgeBann" parameterType="DurAgeBannPVO" resultType="DurAgeBannRVO" >
        /* 대국민포털_DUR연령금기기본 조회 (DurAgeBannMapper.getDurAgeBann) */
        SELECT
             age_bann_sn
            ,prdct_cd
            ,dur_igrd_nm
            ,dur_igrd_cd
            ,dur_prdct_nm
            ,dur_bzenty_nm
            ,mfds_prdct_nm
            ,mfds_igrd_cd
            ,mfds_igrd_nm
            ,rlvt_age
            ,rlvt_age_unit_nm
            ,age_prcs_cnd_nm
            ,ancmnt_no
            ,ancmnt_ymd
            ,dtl_info_cn
            ,aplcn_ym
            ,type_cd
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        FROM kids_own.tb_pp_m_dur_age_bann
        WHERE 1=1
        AND age_bann_sn = #{ageBannSn}
    </select>

    <insert id="insertDurAgeBann" parameterType="DurAgeBannPVO">
        /* 대국민포털_DUR연령금기기본 입력 (DurAgeBannMapper.insertDurAgeBann) */
        INSERT INTO kids_own.tb_pp_m_dur_age_bann
        (
             age_bann_sn
            ,prdct_cd
            ,dur_igrd_nm
            ,dur_igrd_cd
            ,dur_prdct_nm
            ,dur_bzenty_nm
            ,mfds_prdct_nm
            ,mfds_igrd_cd
            ,mfds_igrd_nm
            ,rlvt_age
            ,rlvt_age_unit_nm
            ,age_prcs_cnd_nm
            ,ancmnt_no
            ,ancmnt_ymd
            ,dtl_info_cn
            ,aplcn_ym
            ,type_cd
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        )
        VALUES
        (
             #{ageBannSn}
            ,#{prdctCd}
            ,#{durIgrdNm}
            ,#{durIgrdCd}
            ,#{durPrdctNm}
            ,#{durBzentyNm}
            ,#{mfdsPrdctNm}
            ,#{mfdsIgrdCd}
            ,#{mfdsIgrdNm}
            ,#{rlvtAge}
            ,#{rlvtGgeUnitNm}
            ,#{agePrcsCndNm}
            ,#{ancmntNo}
            ,#{ancmntYmd}
            ,#{dtlInfoCn}
            ,#{aplcnYm}
            ,#{typeCd}
            ,#{rgtrId}
            ,now()

            ,#{mdfrId}
            ,now()

        )
    </insert>

    <update id="updateDurAgeBann" parameterType="DurAgeBannPVO">
        /* 대국민포털_DUR연령금기기본 수정 (DurAgeBannMapper.updateDurAgeBann) */
        UPDATE kids_own.tb_pp_m_dur_age_bann
        SET
             prdct_cd = coalesce(#{prdctCd}, prdct_cd)
            ,dur_igrd_nm = coalesce(#{durIgrdNm}, dur_igrd_nm)
            ,dur_igrd_cd = coalesce(#{durIgrdCd}, dur_igrd_cd)
            ,dur_prdct_nm = coalesce(#{durPrdctNm}, dur_prdct_nm)
            ,dur_bzenty_nm = coalesce(#{durBzentyNm}, dur_bzenty_nm)
            ,mfds_prdct_nm = coalesce(#{mfdsPrdctNm}, mfds_prdct_nm)
            ,mfds_igrd_cd = coalesce(#{mfdsIgrdCd}, mfds_igrd_cd)
            ,mfds_igrd_nm = coalesce(#{mfdsIgrdNm}, mfds_igrd_nm)
            ,rlvt_age = coalesce(#{rlvtAge}, rlvt_age)
            ,rlvt_age_unit_nm = coalesce(#{rlvtGgeUnitNm}, rlvt_age_unit_nm)
            ,age_prcs_cnd_nm = coalesce(#{agePrcsCndNm}, age_prcs_cnd_nm)
            ,ancmnt_no = coalesce(#{ancmntNo}, ancmnt_no)
            ,ancmnt_ymd = coalesce(#{ancmntYmd}, ancmnt_ymd)
            ,dtl_info_cn = coalesce(#{dtlInfoCn}, dtl_info_cn)
            ,aplcn_ym = coalesce(#{aplcnYm}, aplcn_ym)
            ,type_cd = coalesce(#{typeCd}, type_cd)
            ,mdfr_id = coalesce(#{mdfrId}, mdfr_id)
            ,mdfcn_dt = now()

        WHERE 1=1
        AND age_bann_sn = #{ageBannSn}
    </update>

    <insert id="saveDurAgeBann" parameterType="DurAgeBannPVO">
        /* 대국민포털_DUR연령금기기본 저장 (DurAgeBannMapper.insertDurAgeBann) */
        INSERT INTO kids_own.tb_pp_m_dur_age_bann
        (
             age_bann_sn
            ,prdct_cd
            ,dur_igrd_nm
            ,dur_igrd_cd
            ,dur_prdct_nm
            ,dur_bzenty_nm
            ,mfds_prdct_nm
            ,mfds_igrd_cd
            ,mfds_igrd_nm
            ,rlvt_age
            ,rlvt_age_unit_nm
            ,age_prcs_cnd_nm
            ,ancmnt_no
            ,ancmnt_ymd
            ,dtl_info_cn
            ,aplcn_ym
            ,type_cd
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        )
        VALUES
        (
             #{ageBannSn}
            ,#{prdctCd}
            ,#{durIgrdNm}
            ,#{durIgrdCd}
            ,#{durPrdctNm}
            ,#{durBzentyNm}
            ,#{mfdsPrdctNm}
            ,#{mfdsIgrdCd}
            ,#{mfdsIgrdNm}
            ,#{rlvtAge}
            ,#{rlvtGgeUnitNm}
            ,#{agePrcsCndNm}
            ,#{ancmntNo}
            ,#{ancmntYmd}
            ,#{dtlInfoCn}
            ,#{aplcnYm}
            ,#{typeCd}
            ,#{rgtrId}
            ,now()

            ,#{mdfrId}
            ,now()

        )
        ON CONFLICT(age_bann_sn)
        DO UPDATE SET
             prdct_cd = coalesce(excluded.prdct_cd, kids_own.tb_pp_m_dur_age_bann.prdct_cd)
            ,dur_igrd_nm = coalesce(excluded.dur_igrd_nm, kids_own.tb_pp_m_dur_age_bann.dur_igrd_nm)
            ,dur_igrd_cd = coalesce(excluded.dur_igrd_cd, kids_own.tb_pp_m_dur_age_bann.dur_igrd_cd)
            ,dur_prdct_nm = coalesce(excluded.dur_prdct_nm, kids_own.tb_pp_m_dur_age_bann.dur_prdct_nm)
            ,dur_bzenty_nm = coalesce(excluded.dur_bzenty_nm, kids_own.tb_pp_m_dur_age_bann.dur_bzenty_nm)
            ,mfds_prdct_nm = coalesce(excluded.mfds_prdct_nm, kids_own.tb_pp_m_dur_age_bann.mfds_prdct_nm)
            ,mfds_igrd_cd = coalesce(excluded.mfds_igrd_cd, kids_own.tb_pp_m_dur_age_bann.mfds_igrd_cd)
            ,mfds_igrd_nm = coalesce(excluded.mfds_igrd_nm, kids_own.tb_pp_m_dur_age_bann.mfds_igrd_nm)
            ,rlvt_age = coalesce(excluded.rlvt_age, kids_own.tb_pp_m_dur_age_bann.rlvt_age)
            ,rlvt_age_unit_nm = coalesce(excluded.rlvt_age_unit_nm, kids_own.tb_pp_m_dur_age_bann.rlvt_age_unit_nm)
            ,age_prcs_cnd_nm = coalesce(excluded.age_prcs_cnd_nm, kids_own.tb_pp_m_dur_age_bann.age_prcs_cnd_nm)
            ,ancmnt_no = coalesce(excluded.ancmnt_no, kids_own.tb_pp_m_dur_age_bann.ancmnt_no)
            ,ancmnt_ymd = coalesce(excluded.ancmnt_ymd, kids_own.tb_pp_m_dur_age_bann.ancmnt_ymd)
            ,dtl_info_cn = coalesce(excluded.dtl_info_cn, kids_own.tb_pp_m_dur_age_bann.dtl_info_cn)
            ,aplcn_ym = coalesce(excluded.aplcn_ym, kids_own.tb_pp_m_dur_age_bann.aplcn_ym)
            ,type_cd = coalesce(excluded.type_cd, kids_own.tb_pp_m_dur_age_bann.type_cd)
            ,mdfr_id = coalesce(excluded.mdfr_id, kids_own.tb_pp_m_dur_age_bann.mdfr_id)
            ,mdfcn_dt = now()

    </insert>

    <delete id="deleteDurAgeBann" parameterType="DurAgeBannDVO">
        /* 대국민포털_DUR연령금기기본 삭제 (DurAgeBannMapper.deleteDurAgeBann) */
        DELETE FROM kids_own.tb_pp_m_dur_age_bann
        WHERE 1=1
        AND age_bann_sn = #{ageBannSn}
    </delete>

</mapper>