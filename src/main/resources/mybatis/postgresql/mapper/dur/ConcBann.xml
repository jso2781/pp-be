<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.kids.domain.pp.dur.mapper.ConcBannMapper">

    <select id="getConcBann" parameterType="ConcBannPVO" resultType="ConcBannRVO" >
        /* 대국민포털_DUR병용금기기본 조회 (ConcBannMapper.getConcBann) */
        SELECT
             conc_bann_sn
            ,prdct_cd_1
            ,prdct_cd_2
            ,igrd_nm_1
            ,igrd_cd_1
            ,prdct_nm_1
            ,bzenty_nm_1
            ,se_1
            ,mfds_prdct_nm_1
            ,mfds_igrd_cd_1
            ,mfds_igrd_nm_1
            ,igrd_nm_2
            ,igrd_cd_2
            ,prdct_nm_2
            ,bzenty_nm_2
            ,se_2
            ,mfds_prdct_nm_2
            ,mfds_igrd_cd_2
            ,mfds_igrd_nm_2
            ,ancmnt_no
            ,ancmnt_aplcn_day
            ,cutn_mttr
            ,rmrk
            ,type_cd
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        FROM "KIDS_OWN"."TB_PP_M_CONC_BANN"
        WHERE 1=1
        AND conc_bann_sn = #{concBannSn}
    </select>

    <insert id="insertConcBann" parameterType="ConcBannPVO">
        /* 대국민포털_DUR병용금기기본 입력 (ConcBannMapper.insertConcBann) */
        INSERT INTO "KIDS_OWN"."TB_PP_M_CONC_BANN"
        (
             conc_bann_sn
            ,prdct_cd_1
            ,prdct_cd_2
            ,igrd_nm_1
            ,igrd_cd_1
            ,prdct_nm_1
            ,bzenty_nm_1
            ,se_1
            ,mfds_prdct_nm_1
            ,mfds_igrd_cd_1
            ,mfds_igrd_nm_1
            ,igrd_nm_2
            ,igrd_cd_2
            ,prdct_nm_2
            ,bzenty_nm_2
            ,se_2
            ,mfds_prdct_nm_2
            ,mfds_igrd_cd_2
            ,mfds_igrd_nm_2
            ,ancmnt_no
            ,ancmnt_aplcn_day
            ,cutn_mttr
            ,rmrk
            ,type_cd
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        )
        VALUES
        (
             #{concBannSn}
            ,#{prdctCd1}
            ,#{prdctCd2}
            ,#{igrdNm1}
            ,#{igrdCd1}
            ,#{prdctNm1}
            ,#{bzentyNm1}
            ,#{se1}
            ,#{mfdsPrdctNm1}
            ,#{mfdsIgrdCd1}
            ,#{mfdsIgrdNm1}
            ,#{igrdNm2}
            ,#{igrdCd2}
            ,#{prdctNm2}
            ,#{bzentyNm2}
            ,#{se2}
            ,#{mfdsPrdctNm2}
            ,#{mfdsIgrdCd2}
            ,#{mfdsIgrdNm2}
            ,#{ancmntNo}
            ,#{ancmntAplcnDay}
            ,#{cutnMttr}
            ,#{rmrk}
            ,#{typeCd}
            ,#{rgtrId}
            ,now()
            ,#{regPrgrmId}
            ,#{mdfrId}
            ,now()
            ,#{mdfcnPrgrmId}
        )
    </insert>

    <update id="updateConcBann" parameterType="ConcBannPVO">
        /* 대국민포털_DUR병용금기기본 수정 (ConcBannMapper.updateConcBann) */
        UPDATE "KIDS_OWN"."TB_PP_M_CONC_BANN"
        SET
             prdct_cd_1 = coalesce(#{prdctCd1}, prdct_cd_1)
            ,prdct_cd_2 = coalesce(#{prdctCd2}, prdct_cd_2)
            ,igrd_nm_1 = coalesce(#{igrdNm1}, igrd_nm_1)
            ,igrd_cd_1 = coalesce(#{igrdCd1}, igrd_cd_1)
            ,prdct_nm_1 = coalesce(#{prdctNm1}, prdct_nm_1)
            ,bzenty_nm_1 = coalesce(#{bzentyNm1}, bzenty_nm_1)
            ,se_1 = coalesce(#{se1}, se_1)
            ,mfds_prdct_nm_1 = coalesce(#{mfdsPrdctNm1}, mfds_prdct_nm_1)
            ,mfds_igrd_cd_1 = coalesce(#{mfdsIgrdCd1}, mfds_igrd_cd_1)
            ,mfds_igrd_nm_1 = coalesce(#{mfdsIgrdNm1}, mfds_igrd_nm_1)
            ,igrd_nm_2 = coalesce(#{igrdNm2}, igrd_nm_2)
            ,igrd_cd_2 = coalesce(#{igrdCd2}, igrd_cd_2)
            ,prdct_nm_2 = coalesce(#{prdctNm2}, prdct_nm_2)
            ,bzenty_nm_2 = coalesce(#{bzentyNm2}, bzenty_nm_2)
            ,se_2 = coalesce(#{se2}, se_2)
            ,mfds_prdct_nm_2 = coalesce(#{mfdsPrdctNm2}, mfds_prdct_nm_2)
            ,mfds_igrd_cd_2 = coalesce(#{mfdsIgrdCd2}, mfds_igrd_cd_2)
            ,mfds_igrd_nm_2 = coalesce(#{mfdsIgrdNm2}, mfds_igrd_nm_2)
            ,ancmnt_no = coalesce(#{ancmntNo}, ancmnt_no)
            ,ancmnt_aplcn_day = coalesce(#{ancmntAplcnDay}, ancmnt_aplcn_day)
            ,cutn_mttr = coalesce(#{cutnMttr}, cutn_mttr)
            ,rmrk = coalesce(#{rmrk}, rmrk)
            ,type_cd = coalesce(#{typeCd}, type_cd)
            ,mdfr_id = coalesce(#{mdfrId}, mdfr_id)
            ,mdfcn_dt = now()
            ,mdfcn_prgrm_id = coalesce(#{mdfcnPrgrmId}, mdfcn_prgrm_id)
        WHERE 1=1
        AND conc_bann_sn = #{concBannSn}
    </update>

    <insert id="saveConcBann" parameterType="ConcBannPVO">
        /* 대국민포털_DUR병용금기기본 저장 (ConcBannMapper.insertConcBann) */
        INSERT INTO "KIDS_OWN"."TB_PP_M_CONC_BANN"
        (
             conc_bann_sn
            ,prdct_cd_1
            ,prdct_cd_2
            ,igrd_nm_1
            ,igrd_cd_1
            ,prdct_nm_1
            ,bzenty_nm_1
            ,se_1
            ,mfds_prdct_nm_1
            ,mfds_igrd_cd_1
            ,mfds_igrd_nm_1
            ,igrd_nm_2
            ,igrd_cd_2
            ,prdct_nm_2
            ,bzenty_nm_2
            ,se_2
            ,mfds_prdct_nm_2
            ,mfds_igrd_cd_2
            ,mfds_igrd_nm_2
            ,ancmnt_no
            ,ancmnt_aplcn_day
            ,cutn_mttr
            ,rmrk
            ,type_cd
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        )
        VALUES
        (
             #{concBannSn}
            ,#{prdctCd1}
            ,#{prdctCd2}
            ,#{igrdNm1}
            ,#{igrdCd1}
            ,#{prdctNm1}
            ,#{bzentyNm1}
            ,#{se1}
            ,#{mfdsPrdctNm1}
            ,#{mfdsIgrdCd1}
            ,#{mfdsIgrdNm1}
            ,#{igrdNm2}
            ,#{igrdCd2}
            ,#{prdctNm2}
            ,#{bzentyNm2}
            ,#{se2}
            ,#{mfdsPrdctNm2}
            ,#{mfdsIgrdCd2}
            ,#{mfdsIgrdNm2}
            ,#{ancmntNo}
            ,#{ancmntAplcnDay}
            ,#{cutnMttr}
            ,#{rmrk}
            ,#{typeCd}
            ,#{rgtrId}
            ,now()
            ,#{regPrgrmId}
            ,#{mdfrId}
            ,now()
            ,#{mdfcnPrgrmId}
        )
        ON CONFLICT(conc_bann_sn)
        DO UPDATE SET
             prdct_cd_1 = coalesce(excluded.prdct_cd_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".prdct_cd_1)
            ,prdct_cd_2 = coalesce(excluded.prdct_cd_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".prdct_cd_2)
            ,igrd_nm_1 = coalesce(excluded.igrd_nm_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".igrd_nm_1)
            ,igrd_cd_1 = coalesce(excluded.igrd_cd_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".igrd_cd_1)
            ,prdct_nm_1 = coalesce(excluded.prdct_nm_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".prdct_nm_1)
            ,bzenty_nm_1 = coalesce(excluded.bzenty_nm_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".bzenty_nm_1)
            ,se_1 = coalesce(excluded.se_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".se_1)
            ,mfds_prdct_nm_1 = coalesce(excluded.mfds_prdct_nm_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".mfds_prdct_nm_1)
            ,mfds_igrd_cd_1 = coalesce(excluded.mfds_igrd_cd_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".mfds_igrd_cd_1)
            ,mfds_igrd_nm_1 = coalesce(excluded.mfds_igrd_nm_1, "KIDS_OWN"."TB_PP_M_CONC_BANN".mfds_igrd_nm_1)
            ,igrd_nm_2 = coalesce(excluded.igrd_nm_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".igrd_nm_2)
            ,igrd_cd_2 = coalesce(excluded.igrd_cd_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".igrd_cd_2)
            ,prdct_nm_2 = coalesce(excluded.prdct_nm_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".prdct_nm_2)
            ,bzenty_nm_2 = coalesce(excluded.bzenty_nm_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".bzenty_nm_2)
            ,se_2 = coalesce(excluded.se_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".se_2)
            ,mfds_prdct_nm_2 = coalesce(excluded.mfds_prdct_nm_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".mfds_prdct_nm_2)
            ,mfds_igrd_cd_2 = coalesce(excluded.mfds_igrd_cd_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".mfds_igrd_cd_2)
            ,mfds_igrd_nm_2 = coalesce(excluded.mfds_igrd_nm_2, "KIDS_OWN"."TB_PP_M_CONC_BANN".mfds_igrd_nm_2)
            ,ancmnt_no = coalesce(excluded.ancmnt_no, "KIDS_OWN"."TB_PP_M_CONC_BANN".ancmnt_no)
            ,ancmnt_aplcn_day = coalesce(excluded.ancmnt_aplcn_day, "KIDS_OWN"."TB_PP_M_CONC_BANN".ancmnt_aplcn_day)
            ,cutn_mttr = coalesce(excluded.cutn_mttr, "KIDS_OWN"."TB_PP_M_CONC_BANN".cutn_mttr)
            ,rmrk = coalesce(excluded.rmrk, "KIDS_OWN"."TB_PP_M_CONC_BANN".rmrk)
            ,type_cd = coalesce(excluded.type_cd, "KIDS_OWN"."TB_PP_M_CONC_BANN".type_cd)
            ,mdfr_id = coalesce(excluded.mdfr_id, "KIDS_OWN"."TB_PP_M_CONC_BANN".mdfr_id)
            ,mdfcn_dt = now()
            ,mdfcn_prgrm_id = coalesce(excluded.mdfcn_prgrm_id, "KIDS_OWN"."TB_PP_M_CONC_BANN".mdfcn_prgrm_id)
    </insert>

    <delete id="deleteConcBann" parameterType="ConcBannDVO">
        /* 대국민포털_DUR병용금기기본 삭제 (ConcBannMapper.deleteConcBann) */
        DELETE FROM "KIDS_OWN"."TB_PP_M_CONC_BANN"
        WHERE 1=1
        AND conc_bann_sn = #{concBannSn}
    </delete>

</mapper>