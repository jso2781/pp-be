<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.kids.domain.notice.mapper.BbsMapper">

    <select id="getBbs" parameterType="BbsPVO" resultType="BbsRVO" >
        /* 대국민포털_게시판기본 조회 (BbsMapper.getBbs) */
        SELECT
             bbs_id
            ,bbs_nm
            ,bbs_atrb
            ,bbs_expln
            ,bbs_smry
            ,cmnt_use_yn
            ,inq_cnt_expsr_yn
            ,dept_expsr_yn
            ,file_atch_yn
            ,atch_psblty_file_cnt
            ,lang_se_cd
            ,use_yn
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        FROM "KIDS_OWN"."TB_PP_M_BBS"
        WHERE 1=1
        AND bbs_id = #{bbsId}
    </select>

    <insert id="insertBbs" parameterType="BbsPVO">
        /* 대국민포털_게시판기본 입력 (BbsMapper.insertBbs) */
        INSERT INTO "KIDS_OWN"."TB_PP_M_BBS"
        (
             bbs_id
            ,bbs_nm
            ,bbs_atrb
            ,bbs_expln
            ,bbs_smry
            ,cmnt_use_yn
            ,inq_cnt_expsr_yn
            ,dept_expsr_yn
            ,file_atch_yn
            ,atch_psblty_file_cnt
            ,lang_se_cd
            ,use_yn
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        )
        VALUES
        (
             #{bbsId}
            ,#{bbsNm}
            ,#{bbsAtrb}
            ,#{bbsExpln}
            ,#{bbsSmry}
            ,#{cmntUseYn}
            ,#{inqCntExpsrYn}
            ,#{deptExpsrYn}
            ,#{fileAtchYn}
            ,#{atchPsbltyFileCnt}
            ,#{langSeCd}
            ,#{useYn}
            ,#{rgtrId}
            ,now()
            ,#{regPrgrmId}
            ,#{mdfrId}
            ,now()
            ,#{mdfcnPrgrmId}
        )
    </insert>

    <update id="updateBbs" parameterType="BbsPVO">
        /* 대국민포털_게시판기본 수정 (BbsMapper.updateBbs) */
        UPDATE "KIDS_OWN"."TB_PP_M_BBS"
        SET
             bbs_nm = coalesce(#{bbsNm}, bbs_nm)
            ,bbs_atrb = coalesce(#{bbsAtrb}, bbs_atrb)
            ,bbs_expln = coalesce(#{bbsExpln}, bbs_expln)
            ,bbs_smry = coalesce(#{bbsSmry}, bbs_smry)
            ,cmnt_use_yn = coalesce(#{cmntUseYn}, cmnt_use_yn)
            ,inq_cnt_expsr_yn = coalesce(#{inqCntExpsrYn}, inq_cnt_expsr_yn)
            ,dept_expsr_yn = coalesce(#{deptExpsrYn}, dept_expsr_yn)
            ,file_atch_yn = coalesce(#{fileAtchYn}, file_atch_yn)
            ,atch_psblty_file_cnt = coalesce(#{atchPsbltyFileCnt}, atch_psblty_file_cnt)
            ,lang_se_cd = coalesce(#{langSeCd}, lang_se_cd)
            ,use_yn = coalesce(#{useYn}, use_yn)
            ,mdfr_id = coalesce(#{mdfrId}, mdfr_id)
            ,mdfcn_dt = now()
            ,mdfcn_prgrm_id = coalesce(#{mdfcnPrgrmId}, mdfcn_prgrm_id)
        WHERE 1=1
        AND bbs_id = #{bbsId}
    </update>

    <insert id="saveBbs" parameterType="BbsPVO">
        /* 대국민포털_게시판기본 저장 (BbsMapper.insertBbs) */
        INSERT INTO "KIDS_OWN"."TB_PP_M_BBS"
        (
             bbs_id
            ,bbs_nm
            ,bbs_atrb
            ,bbs_expln
            ,bbs_smry
            ,cmnt_use_yn
            ,inq_cnt_expsr_yn
            ,dept_expsr_yn
            ,file_atch_yn
            ,atch_psblty_file_cnt
            ,lang_se_cd
            ,use_yn
            ,rgtr_id
            ,reg_dt
            ,reg_prgrm_id
            ,mdfr_id
            ,mdfcn_dt
            ,mdfcn_prgrm_id
        )
        VALUES
        (
             #{bbsId}
            ,#{bbsNm}
            ,#{bbsAtrb}
            ,#{bbsExpln}
            ,#{bbsSmry}
            ,#{cmntUseYn}
            ,#{inqCntExpsrYn}
            ,#{deptExpsrYn}
            ,#{fileAtchYn}
            ,#{atchPsbltyFileCnt}
            ,#{langSeCd}
            ,#{useYn}
            ,#{rgtrId}
            ,now()
            ,#{regPrgrmId}
            ,#{mdfrId}
            ,now()
            ,#{mdfcnPrgrmId}
        )
        ON CONFLICT(bbs_id)
        DO UPDATE SET
             bbs_nm = coalesce(excluded.bbs_nm, "KIDS_OWN"."TB_PP_M_BBS".bbs_nm)
            ,bbs_atrb = coalesce(excluded.bbs_atrb, "KIDS_OWN"."TB_PP_M_BBS".bbs_atrb)
            ,bbs_expln = coalesce(excluded.bbs_expln, "KIDS_OWN"."TB_PP_M_BBS".bbs_expln)
            ,bbs_smry = coalesce(excluded.bbs_smry, "KIDS_OWN"."TB_PP_M_BBS".bbs_smry)
            ,cmnt_use_yn = coalesce(excluded.cmnt_use_yn, "KIDS_OWN"."TB_PP_M_BBS".cmnt_use_yn)
            ,inq_cnt_expsr_yn = coalesce(excluded.inq_cnt_expsr_yn, "KIDS_OWN"."TB_PP_M_BBS".inq_cnt_expsr_yn)
            ,dept_expsr_yn = coalesce(excluded.dept_expsr_yn, "KIDS_OWN"."TB_PP_M_BBS".dept_expsr_yn)
            ,file_atch_yn = coalesce(excluded.file_atch_yn, "KIDS_OWN"."TB_PP_M_BBS".file_atch_yn)
            ,atch_psblty_file_cnt = coalesce(excluded.atch_psblty_file_cnt, "KIDS_OWN"."TB_PP_M_BBS".atch_psblty_file_cnt)
            ,lang_se_cd = coalesce(excluded.lang_se_cd, "KIDS_OWN"."TB_PP_M_BBS".lang_se_cd)
            ,use_yn = coalesce(excluded.use_yn, "KIDS_OWN"."TB_PP_M_BBS".use_yn)
            ,mdfr_id = coalesce(excluded.mdfr_id, "KIDS_OWN"."TB_PP_M_BBS".mdfr_id)
            ,mdfcn_dt = now()
            ,mdfcn_prgrm_id = coalesce(excluded.mdfcn_prgrm_id, "KIDS_OWN"."TB_PP_M_BBS".mdfcn_prgrm_id)
    </insert>

    <delete id="deleteBbs" parameterType="BbsDVO">
        /* 대국민포털_게시판기본 삭제 (BbsMapper.deleteBbs) */
        DELETE FROM "KIDS_OWN"."TB_PP_M_BBS"
        WHERE 1=1
        AND bbs_id = #{bbsId}
    </delete>

</mapper>