<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.go.kids.domain.notice.mapper.BbsMapper">

    <select id="getBbs" parameterType="BbsPVO" resultType="BbsRVO" >
        /* 대국민포털_게시판기본 조회 (BbsMapper.getBbs) */
        SELECT
             bbs_id
            ,bbs_nm
            ,bbs_atrb_cd
            ,bbs_expln
            ,bbs_smry_cn
            ,cmnt_use_yn
            ,inq_cnt_expsr_yn
            ,dept_expsr_yn
            ,file_atch_yn
            ,atch_psblty_file_cnt
            ,lang_se_cd
            ,use_yn
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        FROM kids_own.TB_PP_M_BBS
        WHERE 1=1
        AND bbs_id = #{bbsId}
    </select>

    <insert id="insertBbs" parameterType="BbsPVO">
        /* 대국민포털_게시판기본 입력 (BbsMapper.insertBbs) */
        INSERT INTO kids_own.TB_PP_M_BBS
        (
             bbs_id
            ,bbs_nm
            ,bbs_atrb_cd
            ,bbs_expln
            ,bbs_smry_cn
            ,cmnt_use_yn
            ,inq_cnt_expsr_yn
            ,dept_expsr_yn
            ,file_atch_yn
            ,atch_psblty_file_cnt
            ,lang_se_cd
            ,use_yn
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        )
        VALUES
        (
             #{bbsId}
            ,#{bbsNm}
            ,#{bbsAtrb}
            ,#{bbsExpln}
            ,#{bbsSmry}
            ,#{cmntUseYn}
            ,#{inqCntExpsrYn}
            ,#{deptExpsrYn}
            ,#{fileAtchYn}
            ,#{atchPsbltyFileCnt}
            ,#{langSeCd}
            ,#{useYn}
            ,#{rgtrId}
            ,now()

            ,#{mdfrId}
            ,now()

        )
    </insert>

    <update id="updateBbs" parameterType="BbsPVO">
        /* 대국민포털_게시판기본 수정 (BbsMapper.updateBbs) */
        UPDATE kids_own.TB_PP_M_BBS
        SET
             bbs_nm = coalesce(#{bbsNm}, bbs_nm)
            ,bbs_atrb_cd = coalesce(#{bbsAtrb}, bbs_atrb_cd)
            ,bbs_expln = coalesce(#{bbsExpln}, bbs_expln)
            ,bbs_smry_cn = coalesce(#{bbsSmry}, bbs_smry_cn)
            ,cmnt_use_yn = coalesce(#{cmntUseYn}, cmnt_use_yn)
            ,inq_cnt_expsr_yn = coalesce(#{inqCntExpsrYn}, inq_cnt_expsr_yn)
            ,dept_expsr_yn = coalesce(#{deptExpsrYn}, dept_expsr_yn)
            ,file_atch_yn = coalesce(#{fileAtchYn}, file_atch_yn)
            ,atch_psblty_file_cnt = coalesce(#{atchPsbltyFileCnt}, atch_psblty_file_cnt)
            ,lang_se_cd = coalesce(#{langSeCd}, lang_se_cd)
            ,use_yn = coalesce(#{useYn}, use_yn)
            ,mdfr_id = coalesce(#{mdfrId}, mdfr_id)
            ,mdfcn_dt = now()

        WHERE 1=1
        AND bbs_id = #{bbsId}
    </update>

    <insert id="saveBbs" parameterType="BbsPVO">
        /* 대국민포털_게시판기본 저장 (BbsMapper.insertBbs) */
        INSERT INTO kids_own.TB_PP_M_BBS
        (
             bbs_id
            ,bbs_nm
            ,bbs_atrb_cd
            ,bbs_expln
            ,bbs_smry_cn
            ,cmnt_use_yn
            ,inq_cnt_expsr_yn
            ,dept_expsr_yn
            ,file_atch_yn
            ,atch_psblty_file_cnt
            ,lang_se_cd
            ,use_yn
            ,rgtr_id
            ,reg_dt

            ,mdfr_id
            ,mdfcn_dt

        )
        VALUES
        (
             #{bbsId}
            ,#{bbsNm}
            ,#{bbsAtrb}
            ,#{bbsExpln}
            ,#{bbsSmry}
            ,#{cmntUseYn}
            ,#{inqCntExpsrYn}
            ,#{deptExpsrYn}
            ,#{fileAtchYn}
            ,#{atchPsbltyFileCnt}
            ,#{langSeCd}
            ,#{useYn}
            ,#{rgtrId}
            ,now()

            ,#{mdfrId}
            ,now()

        )
        ON CONFLICT(bbs_id)
        DO UPDATE SET
             bbs_nm = coalesce(excluded.bbs_nm, kids_own.TB_PP_M_BBS.bbs_nm)
            ,bbs_atrb_cd = coalesce(excluded.bbs_atrb_cd, kids_own.TB_PP_M_BBS.bbs_atrb_cd)
            ,bbs_expln = coalesce(excluded.bbs_expln, kids_own.TB_PP_M_BBS.bbs_expln)
            ,bbs_smry_cn = coalesce(excluded.bbs_smry_cn, kids_own.TB_PP_M_BBS.bbs_smry_cn)
            ,cmnt_use_yn = coalesce(excluded.cmnt_use_yn, kids_own.TB_PP_M_BBS.cmnt_use_yn)
            ,inq_cnt_expsr_yn = coalesce(excluded.inq_cnt_expsr_yn, kids_own.TB_PP_M_BBS.inq_cnt_expsr_yn)
            ,dept_expsr_yn = coalesce(excluded.dept_expsr_yn, kids_own.TB_PP_M_BBS.dept_expsr_yn)
            ,file_atch_yn = coalesce(excluded.file_atch_yn, kids_own.TB_PP_M_BBS.file_atch_yn)
            ,atch_psblty_file_cnt = coalesce(excluded.atch_psblty_file_cnt, kids_own.TB_PP_M_BBS.atch_psblty_file_cnt)
            ,lang_se_cd = coalesce(excluded.lang_se_cd, kids_own.TB_PP_M_BBS.lang_se_cd)
            ,use_yn = coalesce(excluded.use_yn, kids_own.TB_PP_M_BBS.use_yn)
            ,mdfr_id = coalesce(excluded.mdfr_id, kids_own.TB_PP_M_BBS.mdfr_id)
            ,mdfcn_dt = now()

    </insert>

    <delete id="deleteBbs" parameterType="BbsDVO">
        /* 대국민포털_게시판기본 삭제 (BbsMapper.deleteBbs) */
        DELETE FROM kids_own.TB_PP_M_BBS
        WHERE 1=1
        AND bbs_id = #{bbsId}
    </delete>

</mapper>